<!DOCTYPE html>
<html>
	<head>
		<title>Palak Jain - Personal Page</title>
		<link rel="stylesheet" type="text/css" href="/css/main.css">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<link href="https://fonts.googleapis.com/css?family=Raleway:200,100,400" rel="stylesheet" type="text/css" />
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
		<link href='https://fonts.googleapis.com/css?family=Diplomata' rel='stylesheet'>
		<script src="https://cdn.anychart.com/releases/v8/js/anychart-base.min.js"></script>
    <script src="https://cdn.anychart.com/releases/v8/js/anychart-tag-cloud.min.js"></script> 
		
   			<script src="https://d3js.org/d3-interpolate.v1.min.js"></script>
		<script src="https://d3js.org/d3.v6.js"></script>
		<script type="text/javascript" src="https://d3js.org/d3.v3.min.js"></script>
        <!--<script src="http://labratrevenge.com/d3-tip/javascripts/d3.tip.v0.6.3.js"></script>-->
		   
	<style>
		html, body {
			background-color: #d6f5f5;
			 		width: 100%;
    		height: 100%;
      		margin: 0;
    		padding : 0;
		}
		.button {
		  transition-duration: 0.4s;
		  background-color: white; 
		  color: black; 
		  font-size: 16px;
		  border: 2px solid #0D5FAD;
		  cursor: pointer;
			
		}

		.button:hover {
		  background-color: #0D5FAD; /* Green */
		  color: white;
		}
		
		button:active{
		    background-color: #0D5FAD;
		    color: white;
		}

		button:focus{
		    background-color: #0D5FAD;
		    color: white;
}
		.e1,.e2,.e3{
			margin-left: 8px;
		}
		
		.contactdetails{
			text-align: center;
			margin: 30px auto;
                        font-size: 3vw;
		}
		.contactdetails li{
			margin: 0 1vw;
                        font-size: 2vh;
		}
		
		.options{
		font-size: 20px;
		border-bottom: 1px solid #000;
		margin-left: -8px;
		}
		
		.left {
		width: 60%; 
		padding: 0 0 0 0;
		float: left}
		
		div.right {
		width: 40%; 
		padding: 0 0 0 0;
		float: left}
		
		.topnav {
		  overflow: hidden;
		border-bottom: 1px solid #000;
		 }
		 
		.present{
			border-style: inset;
			font-size: 20px;
		}
		
                 ul li{
		  display: inline;
			 
	          
		}
		
		.active {
		  background-color: #4CAF50;
		  color: grey;
		}

		.topnav .icon {
		  display: none;
		}
		

		.axis text {
			font-family: helvetica;
			font-size: 10px;
			fill: gray;
			
		}

		.overlay {
		  height: 0%;
		  width: 100%;
		  position: fixed;
		  z-index: 1;
		  top: 0;
		  left: 0;
		  background-color: rgb(0,0,0);
		  background-color: rgba(0,0,0, 0.9);
		  overflow-y: hidden;
		  transition: 0.5s;
		}

		.overlay-content {
		  position: relative;
		  top: 25%;
		  width: 100%;
		  text-align: center;
		  margin-top: 30px;
		}

		.overlay a {
		  padding: 8px;
		  text-decoration: none;
		  font-size: 36px;
		  color: #818181;
		  display: block;
		  transition: 0.3s;
		}

		.overlay a:hover, .overlay a:focus {
		  color: #f1f1f1;
		}

		.overlay .closebtn {
		  position: absolute;
		  top: 20px;
		  right: 45px;
		  font-size: 60px;
		}

		@media screen and (max-width: 820px) {
		   .topnav li:not(:first-child) {
		    display: none;
		  }
		  .topnav a.icon {
		    float: right;
		    display: block;
		   }	
		  .overlay {overflow-y: auto;}
		  .overlay a {font-size: 20px}
		  .overlay .closebtn {
		  font-size: 40px;
		  top: 15px;
		  right: 35px;
		  }
		}
		
		.bar { fill: steelblue; }
		
		</style>
		
  </head>
	
	<body>
		
		<div class= "topnav" id="myTopnav">
			<nav>
			<ul>
			<li style="color: white; margin-left: -8px; font-size: 2em; font-family: Impact, Charcoal, serif; background: #000000; padding: 1.2% 2.5%; "><a href="https://palak-j.github.io/" style="color:white;">PALAK JAIN</a></li>
			<li><a href="/"><b>HOME</b></a></li>
			<li><a href="about"><b>ABOUT</b></a></li>
			<li><a href="resume"><b>RESUME</b></a></li>
			<li><a href="tech"><b>TECHNICAL PORTFOLIO</b></a></li>
			<li><a href="notes"><b>NOTES</b></a></li>
			<li><a href="curricular"><b>HOBBIES</b></a></li>
			<a style="font-size:30px;cursor:pointer; float:right; margin-right:2%;" class="icon" onclick="openNav()">&#9776;</a>
			</ul>
			</nav>
			</div>
		
			<div id="myNav" class="overlay">
			  <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a>
			  <div class="overlay-content">
			    <a href="/"><b>HOME</b></a>
			    <a href="about"><b>ABOUT</b></a>
			    <a href="Resume_web.pdf"><b>RESUME</b></a>
			    <a href="tech"><b>TECHNICAL PORTFOLIO</b></a>
			    <a href="notes"><b>NOTES</b></a>
			    <a href="curricular"><b>HOBBIES</b></a>
			  </div>
			</div>
		
				
		       <script>
			function openNav() {
			  document.getElementById("myNav").style.height = "100%";
			}

			function closeNav() {
			  document.getElementById("myNav").style.height = "0%";
			}
			</script>
		
 		<h1 style= "text-align: center; font-variant: small-caps; font-size:xx-large; margin-top:20px;">
	  London's 1854 cholera epidemic </h1>
		
		
		 <ul>
			<div class= "present">
			<li><a href="documentation-pr10"><b>Documentation</b></a></li>
			 </div>
			<div class= "present">
			<li><a href="video-pr10"><b>Video Presentation</b></a></li>
			</div>
		</ul>
		
		
		<div id="stacked-bar" class="overviewcard">
                <div class="overviewcard__icon">Death by Age and Gender</div>
                <!--<div class="overviewcard__info" id="xHsG">as;ldfj</div>-->
           	 </div>
    
    		<div class="left">
		<div id="map">
                <h3 style="text-align: center;" >Map of London</h3>
                <svg id="area" width="800" height="650"></svg>
            	</div>
		</div>
		
		<div class="right">
		<div id="bar-chart">
                <h3 style="text-align: center;" >Number of deaths per day</h3>
			
		<!-- Add 3 buttons-->
		<button type="button" class="button" onclick="draw_dots()" id="total" style="margin-left: 2cm;">Total Deaths</button>
		<button type="button" class="button" onclick="draw_dots()" id="bygender" >By Gender</button>
		<button type="button" class="button" onclick="draw_dots()" id="byage" >By Age</button>
			
                <svg id="bar" width="500" height="700"></svg>
            	</div>
	        
		</div>
		
		
		<script>

    //draw map--------------------------------------------------------
    d3.json("docs/pr10/streets.json", function (data) {
        // console.log(data);

        //Define the lines
        var path = d3.svg.line().x(function (d) { return 750- d.x * 35; }).y(function (d) { return 700 - d.y * 35; });      //40 is for size, 

        var g = d3.select('#area').append('g')
        

        //Loop through all the data
        for (var i = 0; i < data.length; i++){
            var line = data[i];

            // console.log(line);
            g.append('path').style('fill', 'none').style('stroke', '#414141').style('stroke-width', '2px').attr('d', path(line))

        }
    });
			
			
	    //add pumps
    d3.csv("docs/pr10/pumps.csv", function (data) {
        console.log(data)
        var dots = d3.select('#area').append('g');

        dots.selectAll('circle')
            .data(data)
            .enter().append('circle')
            .style('fill', '#000000')
	    .attr('r', '5px')
            .attr('cx', function(d) { return 750 - d.x * 35; })
            .attr('cy', function(d) { return 700 - d.y * 35; })
	    .attr('id', function(d) { return 'dots' + 2*d.id; } );

    });
			
	// Merge "deathdays.csv" & "deaths_age_sex.csv"-----------------------------------------------
    //merge the two table so that the deaths_age_sex has a new "Date" column
    d3.csv("docs/pr10/deathdays.csv", function (days) {

        d3.csv("docs/pr10/deaths_age_sex.csv", function (deaths) {

            //j points to the last victim we checked in deaths
            var j=0;
            for(i = 0; i < days.length; i++){

                var theDay = days[i].date;
                var howManyDied = days[i].deaths;

                for(k = 0; k < howManyDied; k++){
                    deaths[j].date = theDay;
                    j++;
                    


                }

            }
	
	var total = document.getElementById('total')
	var bygender = document.getElementById('bygender')
	var byage = document.getElementById('byage')
	
	 //create circles------------------------------------------------------------------
            var dots = d3.select('#area').append('g');
	    //var total = document.getElementById('total');
	    //var bygender = document.getElementById('bygender');
	    
	    //total.addEventListener("click", getTotal);
	    //bygender.addEventListener("click", getByGender);
		
	 
	 var cValue = function(d) { return d["gender"];},
                // color = d3.scale.category10();
                // color = d3.scale.["#EE442F", "#63ACBE"];
                color_over = d3.scale.linear().domain([1,length])
                .interpolate(d3.interpolateHcl)
                .range([d3.rgb('#4194DA'), d3.rgb('#4194DA')]);
		
	var cout = function(d) { return d["gender"];},
                // color = d3.scale.category10();
                // color = d3.scale.["#EE442F", "#63ACBE"];
                color = d3.scale.linear().domain([1,length])
                .interpolate(d3.interpolateHcl)
                .range([d3.rgb('#9AC7EE'), d3.rgb('#9AC7EE')]);
		
	
	 total.onclick = function () {
         cValue = function(d) { return d["gender"];},
                // color = d3.scale.category10();
                // color = d3.scale.["#EE442F", "#63ACBE"];
                color_over = d3.scale.linear().domain([1,length])
                .interpolate(d3.interpolateHcl)
                .range([d3.rgb("#4194DA"), d3.rgb('#4194DA')]);
		 
	 cout = function(d) { return d["gender"];},
                // color = d3.scale.category10();
                // color = d3.scale.["#EE442F", "#63ACBE"];
                color = d3.scale.linear().domain([1,length])
                .interpolate(d3.interpolateHcl)
                .range([d3.rgb('#9AC7EE'), d3.rgb('#9AC7EE')]);
		 
		 d3.selectAll('circle')
		 .style("fill", function(d) { return color(cout(d));})
		 
		
	
		
	};
		
	  bygender.onclick = function () {
          cValue = function(d) { return d["gender"];},
                // color = d3.scale.category10();
                // color = d3.scale.["#EE442F", "#63ACBE"];
                color_over = d3.scale.linear().domain([1,length])
                .interpolate(d3.interpolateHcl)
                .range([d3.rgb("#C839B2"), d3.rgb('#3957C8')]);
		  
         cout = function(d) { return d["gender"];},
                // color = d3.scale.category10();
                // color = d3.scale.["#EE442F", "#63ACBE"];
                color = d3.scale.linear().domain([1,length])
                .interpolate(d3.interpolateHcl)
                .range([d3.rgb('#E18EF1'), d3.rgb('#7792CA')]);
		
		  d3.selectAll('circle')
		 .style("fill", function(d) { return color(cout(d));})
	 //dots.update()
	 //var createdot = document.getElementById("createdot");
		  
	 

	};
		
	byage.onclick = function () {
         cValue = function(d) { return d["age"];},
                // color = d3.scale.category10();
                // color = d3.scale.["#EE442F", "#63ACBE"];
                color_over = d3.scale.linear().domain([0,1,2,3,4,5])
                .interpolate(d3.interpolateHcl)
                .range([d3.rgb("#FCC0BE"), d3.rgb("#FDA9A7"), d3.rgb('#FC807D'),d3.rgb("#FC5E5A"), d3.rgb('#FB413C'), d3.rgb("#FF0700")]);
		 
	 cout = function(d) { return d["age"];},
                // color = d3.scale.category10();
                // color = d3.scale.["#EE442F", "#63ACBE"];
                color = d3.scale.linear().domain([0,1,2,3,4,5])
                .interpolate(d3.interpolateHcl)
                .range([d3.rgb("#FCC0BE"), d3.rgb("#FDA9A7"), d3.rgb('#FC807D'),d3.rgb("#FC5E5A"), d3.rgb('#FB413C'), d3.rgb("#FF0700")]);
		 
		 d3.selectAll('circle')
		 .style("fill", function(d) { return color(cout(d));})
		 
		
	
		
	};
	
 
		 dots.selectAll('circle')
		.data(deaths)
                .enter().append('circle')
                .attr('r', '3px')
		.attr('id', function(d) { return 'dots' + d.id; })
                .attr('cx', function(d) {return 650 - d.x * 30;})
                .attr('cy', function(d) { return 570 - d.y * 30; })
                .attr('class', function (d) {return 'dot' + d.date;})
                .style("fill", function(d) { return color(cout(d));})
	
//create barchart--------------------------------------------------------------
            var margin = {top: 55, right: 25, bottom: 15, left: 60},
                width = 450 - margin.left - margin.right,
                height = 600 - margin.top - margin.bottom;
		
	   
	   var svg = d3.select("#bar").append("svg")
            .attr("width", width + margin.left + margin.right)
            .attr("height", height + margin.top + margin.bottom)
            .append("g")
            .attr("transform", "translate(" + margin.left + "," + margin.top + ")");
		
		
       	var y = d3.scale.ordinal()
            .rangeRoundBands([height, 0], .1)
            .domain(days.map(function (d) {
                return d.date;
            }));
	  
		
	var x = d3.scale.linear()
                .range([0, width])
                .domain([0,150])

	
    //make y axis to show bar names
        var yAxis = d3.svg.axis()
            .scale(y)
	    //no tick marks
            .tickSize(2)
	    .orient("left");
	
	
	var xAxis = d3.svg.axis()
            .scale(x)
	    //no tick marks
            .tickSize(2)
	    .orient("top");
		
		
        var gy = svg.append("g")
            .attr("class", "y axis")
            .call(yAxis)
	    .append("text")
	    .attr("transform", "rotate(-90)")
	    .attr("y", -40)
	     .attr("x", -5*60)
	    .style("font-size", "25px")
	    .style("text-anchor", "start")
	    .style("font-weight", "bold")
	    .text("Date");
	
	var gx = svg.append("g")
	    .attr("class", "x axis")
	    .call(xAxis)
	    //.append("text")
	    //.attr("x", width)
	    //.attr("y", height-6)
	    //.attr("dy", ".75em")
	    //.style("text-anchor", "end")
	    //.text("Number of Deaths");
	

        var bars = svg.selectAll(".bar")
            .data(days)
            .enter()
            .append("g")
	
	
	//append rects
        bars.append("rect")
            .attr("class", "bar")
            .attr("y", function (d) {
                return y(d.date);
            })
            .attr("height", y.rangeBand())
            .attr("x", 0)
            .attr("width", function (d) {
                return x(d.deaths);
            })
	    .on('mouseover', function (d) {
		// tip.show
		    d3.selectAll('.' + 'dot' + d.date)
			.style("fill", function(d) { return color_over(cValue(d));})
			.attr('r', '8px')

		// this.parentNode.appendChild(this);

	         })
		.on('mouseout', function (d) {
                        d3.selectAll('.' + 'dot' + d.date)
                            .style("fill", function(d) { return color(cout(d));})
                            .attr('r', '3px')


                    })
	    

        
	});
	   
    });
	
		var initStackedBarChart = {
	draw: function(config) {
		me = this,
		domEle = config.element,
		stackKey = config.key,
		data = config.data,
		margin = {top: 20, right: 20, bottom: 30, left: 50},
		parseDate = d3.timeParse("%m/%Y"),
		width = 960 - margin.left - margin.right,
		height = 500 - margin.top - margin.bottom,
		xScale = d3.scaleLinear().rangeRound([0, width]),
		yScale = d3.scaleBand().rangeRound([height, 0]).padding(0.1),
		color = d3.scaleOrdinal(d3.schemeCategory20),
		xAxis = d3.axisBottom(xScale),
		yAxis =  d3.axisLeft(yScale).tickFormat(d3.timeFormat("%b")),
		svg = d3.select("#"+domEle).append("svg")
				.attr("width", width + margin.left + margin.right)
				.attr("height", height + margin.top + margin.bottom)
				.append("g")
				.attr("transform", "translate(" + margin.left + "," + margin.top + ")");

		var stack = d3.stack()
			.keys(stackKey)
			/*.order(d3.stackOrder)*/
			.offset(d3.stackOffsetNone);
	
		var layers= stack(data);
			data.sort(function(a, b) { return b.total - a.total; });
			yScale.domain(data.map(function(d) { return parseDate(d.date); }));
			xScale.domain([0, d3.max(layers[layers.length - 1], function(d) { return d[0] + d[1]; }) ]).nice();

		var layer = svg.selectAll(".layer")
			.data(layers)
			.enter().append("g")
			.attr("class", "layer")
			.style("fill", function(d, i) { return color(i); });

		  layer.selectAll("rect")
			  .data(function(d) { return d; })
			.enter().append("rect")
			  .attr("y", function(d) { return yScale(parseDate(d.data.date)); })
			  .attr("x", function(d) { return xScale(d[0]); })
			  .attr("height", yScale.bandwidth())
			  .attr("width", function(d) { return xScale(d[1]) - xScale(d[0]) });

			svg.append("g")
			.attr("class", "axis axis--x")
			.attr("transform", "translate(0," + (height+5) + ")")
			.call(xAxis);

			svg.append("g")
			.attr("class", "axis axis--y")
			.attr("transform", "translate(0,0)")
			.call(yAxis);							
	}
}
var data = [{"date":"4/1854","total":8571,"disease":1,"wounds":0,"other":5},{"date":"5/1854","total":23333,"disease":12,"wounds":0,"other":9},{"date":"6/1854","total":28333,"disease":11,"wounds":0,"other":6},{"date":"7/1854","total":28772,"disease":359,"wounds":0,"other":23},{"date":"8/1854","total":30246,"disease":828,"wounds":1,"other":30},{"date":"9/1854","total":30290,"disease":788,"wounds":81,"other":70},{"date":"10/1854","total":30643,"disease":503,"wounds":132,"other":128},{"date":"11/1854","total":29736,"disease":844,"wounds":287,"other":106},{"date":"12/1854","total":32779,"disease":1725,"wounds":114,"other":131},{"date":"1/1855","total":32393,"disease":2761,"wounds":83,"other":324},{"date":"2/1855","total":30919,"disease":2120,"wounds":42,"other":361},{"date":"3/1855","total":30107,"disease":1205,"wounds":32,"other":172},{"date":"4/1855","total":32252,"disease":477,"wounds":48,"other":57},{"date":"5/1855","total":35473,"disease":508,"wounds":49,"other":37},{"date":"6/1855","total":38863,"disease":802,"wounds":209,"other":31},{"date":"7/1855","total":42647,"disease":382,"wounds":134,"other":33},{"date":"8/1855","total":44614,"disease":483,"wounds":164,"other":25},{"date":"9/1855","total":47751,"disease":189,"wounds":276,"other":20},{"date":"10/1855","total":46852,"disease":128,"wounds":53,"other":18},{"date":"11/1855","total":37853,"disease":178,"wounds":33,"other":32},{"date":"12/1855","total":43217,"disease":91,"wounds":18,"other":28},{"date":"1/1856","total":44212,"disease":42,"wounds":2,"other":48},{"date":"2/1856","total":43485,"disease":24,"wounds":0,"other":19},{"date":"3/1856","total":46140,"disease":15,"wounds":0,"other":35}];
var key = ["wounds", "other", "disease"];
initStackedBarChart.draw({
	data: data,
	key: key,
	element: 'stacked-bar'
});	
			
			
			
			
			
			
			
 
     var SexData = [
        {AgeRange:'0-10', Sex:{Male:65, Female:78}},
        {AgeRange:'11-20', Sex:{Male:29, Female:19}},
        {AgeRange:'21-40', Sex:{Male:34, Female:24}},
        {AgeRange:'41-60', Sex:{Male:22, Female:35}},
        {AgeRange:'61-80', Sex:{Male:46, Female:45}},
        {AgeRange:'>80', Sex:{Male:88, Female:86}},
    ];

	
			
    
</script>


		

		
		
		
  
    
		
		</body>		
             
		<footer>
    		        <hr>
                        <div class="contactdetails">
		        <ul>
			
			
			<li><a href="https://www.linkedin.com/in/palak-jain-83358215b/" target="_blank">
				<span class="fa-stack fa-2x">
  				<i class="fa fa-circle fa-stack-2x"></i>
 				<i class="fa fa-linkedin fa-stack-1x fa-inverse"></i>
				</span>
				</a></li>
			
			
        		<li><a href="mailto:jainpalak741@gmail.com" target="_blank">
				<span class="fa-stack fa-2x">
  				<i class="fa fa-circle fa-stack-2x"></i>
 				<i class="fa fa-envelope fa-stack-1x fa-inverse"></i>
				</span>
				</a></li>
			
			
			<li><a href="https://github.com/palak-j" target="_blank">
				<span class="fa-stack fa-2x">
  				<i class="fa fa-circle fa-stack-2x"></i>
 				<i class="fa fa-github fa-stack-1x fa-inverse"></i>
				</span>
				</a></li>
			
			<li><a href="https://www.facebook.com/palak.jain.92102" target="_blank">
				<span class="fa-stack fa-2x">
  				<i class="fa fa-circle fa-stack-2x"></i>
 				<i class="fa fa-facebook fa-stack-1x fa-inverse"></i>
				</span>
				</a></li>
			
			<li><a href="https://www.instagram.com/jainpalak741/" target="_blank">
				<span class="fa-stack fa-2x">
  				<i class="fa fa-circle fa-stack-2x"></i>
 				<i class="fa fa-instagram fa-stack-1x fa-inverse"></i>
				</span>
				</a></li>
			</ul>
                </div>
		</footer>
		
</html>
